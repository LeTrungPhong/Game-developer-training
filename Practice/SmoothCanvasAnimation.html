<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <canvas
            id="canvas"
            width="750"
            height="400"
            style="border: 1px solid lightgrey"
        >
            Your browser does not support the HTML5 canvas tag.
        </canvas>
    </body>
    <script>
        let canvas;
        let context;
        window.onload = init();

        function init() {
            canvas = document.getElementById("canvas");
            context = canvas.getContext("2d");

            window.requestAnimationFrame(gameLoop);
        }

        let rectX = 0;
        let rectY = 0;
        let secondsPassed = 0;
        let oldTimeStamp = 0;
        let movingSpeed = 50;

        function gameLoop(timeStamp) {
            secondsPassed = (timeStamp - oldTimeStamp) / 1000;
            // secondsPassed = Math.min(secondsPassed, 0.1);
            oldTimeStamp = timeStamp;

            update(secondsPassed);
            draw();

            // window.requestAnimationFrame(gameLoop);
        }

        function draw() {
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.fillStyle = "#ff8080";
            context.fillRect(rectX, rectY, 150, 100);
        }

        function update(secondsPassed) {
            rectX = rectX + movingSpeed * secondsPassed;
            rectY = rectY + movingSpeed * secondsPassed;
            console.log(rectX + " " + rectY);
        }
    </script>
</html>
